########################################
# Cursed Donation Box Disaster events
########################################

namespace = th_cursed_donation_box

#Start event
country_event = {
	id = th_cursed_donation_box.1
	title = th_cursed_donation_box.1.t
	desc = th_cursed_donation_box.1.desc
	picture = LIBERUM_VETO_eventPicture
	
	is_triggered_only = yes

	immediate = {
		set_country_flag = th_had_cursed_donation_box
		hidden_effect = {
			add_country_modifier = {
				name = th_dbc_waiting
				duration = 3650
				hidden = yes
			}
		}
	}
	
	option = {
		name = th_cursed_donation_box.1.a
		custom_tooltip = th_cursed_donation_box.1.a.tt
		add_country_modifier = {
			name = th_donation_box_curse
			duration = -1
		}
		
		ai_chance = { 
			factor = 100
		}
	}
}

#Curse is finally lifted
country_event = {
	id = th_cursed_donation_box.2
	title = th_cursed_donation_box.2.t
	desc = th_cursed_donation_box.2.desc
	picture = LIBERUM_VETO_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = th_cursed_donation_box.2.a
		custom_tooltip = th_cursed_donation_box.2.a.tt
		remove_country_modifier = th_donation_box_curse
		remove_country_modifier = th_dbc_renovated_shrine
		remove_country_modifier = th_dbc_decaying_shrine
		remove_country_modifier = th_dbc_natural_inflation
		remove_country_modifier = th_dbc_pillaging_trivialized
		remove_country_modifier = th_dbc_sticking_with_the_right_path
		remove_country_modifier = th_dbc_eager_shrine_maidens
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_province_modifier = th_dbc_angered_locals
				}
				remove_province_modifier = th_dbc_angered_locals
			}
			remove_country_modifier = th_dbc_waiting
		}
		
		ai_chance = { 
			factor = 100
		}
	}
}

Unique events

#Shrine Maidens eager to lift the curse
country_event = {
	id = th_cursed_donation_box.3
	title = th_cursed_donation_box.3.t
	desc = th_cursed_donation_box.3.desc
	picture = SHRINE_eventPicture

	trigger = {
		NOT = { has_country_modifier = th_dbc_waiting }
		has_country_modifier = th_donation_box_curse
	}

	mean_time_to_happen = {
		months = 12
	}

	option = {
		name = th_cursed_donation_box.3.a
		add_country_modifier = {
			name = th_dbc_eager_shrine_maidens
			duration = -1
		}
	}
}


#Random monthly events

#Youkai hunting job
country_event = {
	id = th_cursed_donation_box.11
	title = th_cursed_donation_box.11.t
	desc = th_cursed_donation_box.11.desc
	picture = SHRINE_eventPicture

	is_triggered_only = yes

	option = {
		name = th_cursed_donation_box.11.a
		add_treasury = 75
		add_mil_power = -50
	}

	option = {
		name = th_cursed_donation_box.11.b
		add_mil_power = 15
	}
}

#Yukari donates a fortune
country_event = {
	id = th_cursed_donation_box.12
	title = th_cursed_donation_box.12.t
	desc = th_cursed_donation_box.12.desc
	picture = SHRINE_eventPicture

	trigger = {
		MHG = {
			has_opinion = {
				who = ROOT
				value = 75
			}
		}
	}

	is_triggered_only = yes

	option = {
		name = th_cursed_donation_box.12.a
		add_treasury = 135
	}
}

#People infurated by vanished money
province_event = {
	id = th_cursed_donation_box.13
	title = th_cursed_donation_box.13.t
	desc = th_cursed_donation_box.13.desc
	picture = SHRINE_eventPicture

	trigger = {
		NOT = {
			has_province_modifier = th_dbc_angered_locals
		}
	}

	is_triggered_only = yes

	option = {	#Try to tell them the truth
		name = th_cursed_donation_box.13.a
		add_province_modifier = {
			name = th_dbc_angered_locals
			duration = 730
		}
	}

	option = {	#Don't say anything
		name = th_cursed_donation_box.13.a
		owner = {
			add_devotion = -25
		}
	}
}

#Shrine needs renovation
country_event = {
	id = th_cursed_donation_box.14
	title = th_cursed_donation_box.14.t
	desc = th_cursed_donation_box.14.desc
	picture = SHRINE_eventPicture

	trigger = {
		NOT = { has_country_modifier = th_dbc_renovated_shrine }
		NOT = { has_country_modifier = th_dbc_decaying_shrine }
	}

	is_triggered_only = yes

	option = {
		name = th_cursed_donation_box.14.a
		add_years_of_income = -1.5
		add_country_modifier = {
			name = th_dbc_renovated_shrine
			duration = 3650
		}
	}

	option = {
		name = th_cursed_donation_box.14.b
		add_country_modifier = {
			name = th_dbc_decaying_shrine
			duration = 3650
		}
	}
}

#We just print our own money!
country_event = {
	id = th_cursed_donation_box.15
	title = th_cursed_donation_box.15.t
	desc = th_cursed_donation_box.15.desc
	picture = SHRINE_eventPicture

	trigger = {
		NOT = { has_country_modifier = th_dbc_natural_inflation }
	}

	is_triggered_only = yes

	option = {
		name = th_cursed_donation_box.15.a
		add_years_of_income = 2
		add_inflation = 5
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				inflation = 6
			}
		}
	}

	option = {
		name = th_cursed_donation_box.15.b
		add_country_modifier = {
			name = th_dbc_natural_inflation
			duration = 1825
		}
		add_years_of_income = -1
		ai_chance = {
			factor = 0
			modifier = {
				factor = 100
				inflation = 6
			}
		}
	}
}

#Loot and pillage!
country_event = {
	id = th_cursed_donation_box.16
	title = th_cursed_donation_box.16.t
	desc = th_cursed_donation_box.16.desc
	picture = SHRINE_eventPicture

	trigger = {
		is_at_war = yes
		NOT = { has_country_modifier = th_dbc_pillaging_trivialized }
		NOT = { has_country_modifier = th_dbc_sticking_with_the_right_path }
	}

	is_triggered_only = yes

	option = {
		name = th_cursed_donation_box.16.a
		add_country_modifier = {
			name = th_dbc_pillaging_trivialized
			duration = 1825
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				is_in_deficit = no
			}
		}
	}

	option = {
		name = th_cursed_donation_box.16.b
		add_country_modifier = {
			name = th_dbc_sticking_with_the_right_path
			duration = 1825
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				is_in_deficit = yes
			}
		}
	}
}